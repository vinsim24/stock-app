name: Documentation Update

on:
  push:
    branches: [ main ]
    paths:
      - '**.md'
      - 'docs/**'
      - 'deploy.sh'
      - 'deploy.bat'
  pull_request:
    branches: [ main ]
    paths:
      - '**.md'
      - 'docs/**'
      - 'deploy.sh'
      - 'deploy.bat'

jobs:
  documentation-update:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
      
    - name: Validate documentation
      run: |
        echo "📝 Documentation update detected"
        echo "📋 Validating markdown files..."
        
        # Check for broken links (basic check)
        find . -name "*.md" -exec echo "Checking: {}" \;
        
        # List changed documentation files
        if [ "${{ github.event_name }}" = "push" ]; then
          echo "📄 Updated documentation files:"
          git diff --name-only HEAD~1 HEAD | grep -E '\.(md|txt)$' || echo "No markdown files changed"
        fi
        
    - name: Documentation deployment status
      run: |
        echo "✅ Documentation validation complete!"
        echo "📚 Documentation files are valid"
        echo "🚫 Skipped Docker image builds (documentation-only changes)"
        echo "💡 Next code push will trigger automatic Docker builds"
